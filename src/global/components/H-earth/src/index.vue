<template>
  <div>
    <div
      id="mapCharts"
      ref="mapCharts"
      :style="{ width: width, height: height }"
    ></div>
  </div>
</template>
<script>
import * as echarts from "echarts";
import { sxMapSvg } from "./sxSvg";
//icon路径
const bianDianZhanPath =
  "M4.0009803,13.4993004 L4.74992648,13.4993004 L5.5880796,8.60623626 L4.49210862,8.60623626 L4.49210862,9.20087947 L4.15194589,9.20087947 L4.15194589,8.25744553 L5.62337026,7.0501699 L5.62337026,6.33559864 L4.49308891,6.33559864 L4.49308891,6.93024185 L4.15194589,6.93024185 L4.15194589,5.98780732 L5.62337026,4.77853288 L5.62337026,4.52668399 C5.62337026,4.21387168 5.8851093,4.0029982 6.17723753,4.0009994 L7.48495246,4 C7.77806097,4 8.0437212,4.21487108 8.0437212,4.52768339 L8.0437212,4.78253048 L9.51710617,5.99080552 L9.51710617,6.93024185 L9.17498284,6.93024185 L9.17498284,6.33559864 L8.0437212,6.33559864 L8.0437212,7.0521687 L9.51710617,8.25944433 L9.51710617,8.86608035 L9.17498284,8.86608035 L9.17498284,8.60523686 L8.07901186,8.60523686 L8.12410548,8.86608035 L7.21341045,8.86608035 L7.46926772,8.60523686 L6.19684345,8.60523686 L6.83207529,9.24985009 L7.03009509,9.05096942 L6.93206548,9.65660604 L6.83305558,9.556666 L5.94588766,10.4551269 L6.83305558,11.5224865 L7.11440055,11.1846892 L7.18890305,11.1846892 L7.18890305,11.4295423 L6.97323792,11.6893864 L7.18890305,11.9492305 L7.18890305,12.285029 L6.83305558,11.8572856 L5.46946378,13.4993004 L7.40652877,13.4993004 L7.40652877,11.201679 L13.387315,11.201679 L13.387315,13.4993004 L14,13.4993004 L14,14 L4,14 L4.0009803,13.4993004 Z M5.84393687,10.6679992 L5.40378394,13.2434539 L6.69385354,11.6893864 L5.84393687,10.6679992 L5.84393687,10.6679992 Z M6.15371042,8.86807915 L5.93118322,10.1643014 L6.68208999,9.40375775 L6.15371042,8.86807915 L6.15371042,8.86807915 Z M6.22527203,7.97061763 L6.70757769,7.27503498 L6.22527203,6.57945233 L6.22527203,7.97061763 Z M6.83795706,7.08714771 L7.35849427,6.33559864 L6.31643956,6.33559864 L6.83795706,7.08714771 Z M7.44083913,6.59244453 L6.96735614,7.27503498 L7.44083913,7.95762542 L7.44083913,6.59244453 Z M6.83795706,7.46292225 L6.28801098,8.25744553 L7.38888344,8.25744553 L6.83795706,7.46292225 Z M6.22527203,5.74495303 L6.68699147,5.27423546 L6.22527203,4.80451729 L6.22527203,5.74495303 L6.22527203,5.74495303 Z M6.83795706,5.1203278 L7.33594746,4.61263242 L6.33996667,4.61163302 L6.83795706,5.1203278 Z M7.44083913,4.81451129 L6.98892265,5.27523486 L7.44083913,5.73595842 L7.44083913,4.81451129 Z M6.83795706,5.42914251 L6.28997157,5.98780732 L7.38496226,5.98780732 L6.83795706,5.42914251 Z M8.0437212,7.46991805 L8.0437212,8.25844493 L9.00343104,8.25844493 L8.0437212,7.46991805 Z M4.65973924,8.25744553 L5.62337026,8.25744553 L5.62337026,7.46791925 L4.65973924,8.25744553 Z M8.0437212,5.20027983 L8.0437212,5.98680792 L9.00343104,5.98680792 L8.0437212,5.20027983 Z M4.66071954,5.98680792 L5.62337026,5.98680792 L5.62337026,5.19728163 L4.66071954,5.98680792 Z M13.5480835,9.08894663 L12.3619253,9.08894663 L12.3619253,8.57225665 L12.4168219,8.57225665 L12.4168219,8.30341795 L11.5796491,8.30341795 L11.5796491,8.57225665 L11.6335653,8.57225665 L11.6335653,9.38376974 L11.5051466,9.38376974 L11.5051466,9.08894663 L7.24576022,9.08894663 L6.99872562,10.6290226 L6.99872562,10.9618229 L13.7951181,10.9618229 L13.7951181,10.6290226 L13.5480835,9.08894663 Z M8.45446525,13.4993004 L9.44456426,13.4993004 L9.44456426,11.678393 L8.45446525,11.678393 L8.45446525,13.4993004 Z M11.8668758,11.678393 L10.8777571,11.678393 L10.8777571,12.8746752 L11.8668758,12.8746752 L11.8668758,11.678393 Z";
const huanLiuZhan =
  "M639.806604 141.591273c24.901818 26.414545 50.618182 52.317091 76.101818 78.103272a18.455273 18.455273 0 0 1 5.515636 14.010182v53.504h4.584727l155.997091-31.022545c18.199273-3.793455 18.199273-3.979636 18.199273-22.807273 0-18.781091-1.792-37.701818 13.312-53.178182 5.003636-6.702545 8.610909-14.312727 10.589091-22.411636a118.784 118.784 0 0 0-212.992-101.701818 132.654545 132.654545 0 0 0-19.083636 54.621091c-12.008727-12.613818-21.713455-22.900364-31.720728-33.000728-21.690182-21.713455-35.095273-21.713455-56.785454-0.930909-28.811636 28.020364-57.716364 55.924364-85.899637 84.526546-6.004364 6.004364-9.099636 6.190545-15.127272 0-30.184727-30.208-60.974545-60.299636-90.996364-89.902546a29.323636 29.323636 0 0 0-44.381091 0c-4.189091 3.793455-8.215273 7.912727-12.008727 12.194909-7.586909 8.704-15.104 18.199273-22.597818 26.600728a15.080727 15.080727 0 0 1-5.585455-10.589091 118.877091 118.877091 0 0 0-205.917091-58.600728 116.782545 116.782545 0 0 0-8.192 148.596364c4.794182 5.794909 7.284364 13.195636 7.098182 20.805818v66.094546c0 8.610909 1.093818 11.799273 11.101091 9.588363a12124.625455 12124.625455 0 0 1 159.301818-31.883636c6.888727-1.512727 8.890182-4.608 8.890182-11.52 0-6.888727-2.699636-15.290182 4.421818-22.388364a4159.674182 4159.674182 0 0 0 77.684364-79.592727c6.4-6.609455 9.588364-5.306182 15.290182 0 27.508364 28.578909 54.597818 56.994909 83.409454 85.410909 21.108364 21.271273 36.398545 21.480727 58.088727 0 28.392727-28.625455 57.018182-56.622545 85.015273-85.410909 6.283636-5.515636 9.890909-6.213818 16.686546 0.884364zM956.920785 899.490909h-46.615272c-7.982545 0-10.589091-2.699636-10.193455-10.589091 0.395636-7.912727 0-18.199273 0-27.112727 0-6.190545-2.001455-7.982545-8.192-6.888727-54.597818 11.287273-109.195636 22.202182-164.794182 33.28-2.513455 0-6.004364 0-5.818181 4.026181 0 8.890182-6.004364 7.098182-11.101091 7.098182h-52.200728a58.717091 58.717091 0 0 0-55.901091 50.594909 210.711273 210.711273 0 0 0-1.093818 34.606546 31.488 31.488 0 0 0 36.514909 36.398545h348.997819a30.417455 30.417455 0 0 0 33.28-33.303272v-25.111273a59.717818 59.717818 0 0 0-62.88291-62.999273z m-600.599272 0h-45.498182c-9.099636 0-13.312-1.792-12.218182-11.799273 1.117091-10.007273 0-17.291636 0-25.995636s-2.001455-7.796364-7.982545-6.609455L126.712785 888.087273c-3.304727 0-7.307636 0-7.307636 5.515636 0 5.492364-4.584727 5.794909-8.680727 5.794909h-51.2a58.973091 58.973091 0 0 0-59.415273 58.600727v25.809455c0 25.879273 11.101091 36.398545 36.398546 36.398545h348.113454a30.650182 30.650182 0 0 0 34.210909-33.303272v-24.901818a60.183273 60.183273 0 0 0-62.510545-62.510546zM60.781149 481.512727c1.512727 0 5.306182 0 8.913455-1.326545l107.985454-21.480727c64.302545-12.706909 128.512-25.111273 192.814546-38.4a59.578182 59.578182 0 0 0 50.199272-67.607273 59.578182 59.578182 0 0 0-73.797818-48.896c-35.304727 6.586182-70.609455 13.800727-105.797818 20.898909-64.302545 12.706909-128.512 25.088-192.814545 38.4a59.508364 59.508364 0 0 0-48.104728 62.999273 60.881455 60.881455 0 0 0 60.602182 55.389091z m589.009455-118.318545a59.392 59.392 0 0 0-46.196364 70.283636 59.392 59.392 0 0 0 70.283636 46.219637c35.304727-6.609455 70.609455-13.800727 105.821091-20.805819 64.302545-12.683636 128.488727-25.297455 192.791273-38.586181a59.112727 59.112727 0 0 0 47.290182-62.813091 60.974545 60.974545 0 0 0-60.090182-54.597819c-1.489455 0-5.12 0-8.890182 1.303273l-169.425454 33.512727c-44.078545 7.796364-87.877818 16.197818-131.584 25.483637z m299.799272 119.621818c-98.909091 18.176-197.701818 38.981818-296.587636 58.577455a61.626182 61.626182 0 0 0-38.4 22.411636 58.181818 58.181818 0 0 0-4.002909 68.096 59.275636 59.275636 0 0 0 65.885091 26.786909c98.606545-19.386182 197.003636-39.098182 295.307636-59.182545a59.531636 59.531636 0 0 0 47.895273-57.716364 58.577455 58.577455 0 0 0-70.097455-58.996364z m-592.593454-1.326545l-10.612364 1.512727-158.394182 31.488c-45.009455 8.913455-89.902545 18.199273-134.888727 26.810182a59.671273 59.671273 0 0 0-49.803636 76.986181 60.439273 60.439273 0 0 0 75.170909 39.912728l202.821818-40.797091 88.110545-18.199273a59.578182 59.578182 0 1 0-12.404363-118.202182v0.488728zM63.224785 838.888727c3.095273 0 9.076364-1.093818 15.080728-2.187636l222.813091-44.613818c22.388364-4.584727 44.590545-8.680727 67.002181-13.498182a59.508364 59.508364 0 0 0 46.49891-70.190546 59.508364 59.508364 0 0 0-70.213819-46.498909c-68.491636 13.288727-136.680727 27.298909-205.195636 41.006546-29.696 5.794909-59.485091 11.682909-89.204364 18.199273a59.438545 59.438545 0 0 0-45.986909 70.49309 59.648 59.648 0 0 0 59.205818 47.290182z m881.896728-176.407272a23214.382545 23214.382545 0 0 0-205.009455 41.006545c-32.814545 6.702545-65.908364 11.101091-97.908363 20.619636a57.972364 57.972364 0 0 0-39.889455 63.697455 59.810909 59.810909 0 0 0 61.696 51.2c2.909091 0 8.913455-0.907636 14.894545-2.001455l213.41091-42.402909 77.009454-15.313454a59.205818 59.205818 0 0 0 46.08-81.477818 58.554182 58.554182 0 0 0-70.283636-35.304728z";
echarts.registerMap("mapEarth", { svg: sxMapSvg });
export default {
  props: {
    width: {
      typeof: Number,
      default: "650px"
    },
    height: {
      typeof: Number,
      default: "540px"
    }
  },
  data() {
    return {
      option: {},
      chart: null
    };
  },
  watch: {},
  created() {},
  mounted() {
    this.restoreChart();
  },
  methods: {
    restoreChart() {
      this.initData();
      this.initEchart();
      this.refreshChart();
    },
    initEchart() {
      // let that = this;
      this.chart = echarts.init(this.$refs.mapCharts);
      // this.chart.on("click", { seriesName: "num" }, function(params) {
      //   const id = params.value[2];
      //   const data = that.params.filter((item) => {
      //     return item.id === id;
      //   })[0];
      //   that.$emit("numClick", data);
      // });
    },
    // 绘制图表
    refreshChart() {
      if (!this.chart) return false;
      this.chart.setOption(this.option || {}, true);
      window.addEventListener("resize", () => {
        this.chart.resize();
      });
    },
    initData() {
      const series = [];
      this.option = {
        geo: {
          top: 0,
          bottom: 0,
          left: 0,
          right: 0,
          map: "mapEarth",
          aspectScale: 0.75,
          itemStyle: {
            borderWidth: 0
          },
          label: {
            show: true,
            textStyle: {
              color: "#fff"
            }
          },
          emphasis: {
            label: {
              show: false
            },
            itemStyle: {
              areaColor: "rgba(255, 255, 255, 0.8)"
            }
          }
        },
        series: [
          {
            type: "effectScatter", //effectScatter,scatter
            z: 1,
            coordinateSystem: "geo",
            data: [[409.6, 80.1, "01121400000014"]],
            symbol: "pin",
            symbolSize: 45,
            emphasis: {
              scale: false
            },
            itemStyle: {
              color: "red",
              opacity: 1
            },
            label: {
              show: true,
              position: "top",
              distance: 5,
              // formatter: value,
              backgroundColor: "rgba(0, 0, 0, 0.8)",
              borderWidth: 1,
              borderRadius: 2,
              width: 40,
              height: 18,
              lineHeight: 16,
              vertical: "middle",
              color: "red",
              borderColor: "red"
            }
          },
          {
            name: "num",
            type: "custom",
            z: 3,
            coordinateSystem: "geo",
            data: [[409.6, 80.1, "01121400000014"]],
            renderItem: function(params, api) {
              let coords = [409.6, 80.1, "01121400000014"];
              return {
                type: "group",
                children: [
                  {
                    z2: 3,
                    type: "circle",
                    shape: {
                      cx: coords[0] + 20,
                      cy: coords[1] + 13,
                      r: 10
                    },
                    style: {
                      fill: "rgba(255, 255, 255, 1)",
                      lineWidth: 10
                    }
                  },
                  {
                    z2: 4,
                    type: "path",
                    shape: {
                      pathData: bianDianZhanPath,
                      x: coords[0] + 14,
                      y: coords[1] + 8,
                      width: 12,
                      height: 12
                    },
                    style: {
                      fill: "red",
                      lineWidth: 10
                    }
                  }
                ]
              };
            }
          },
          {
            type: "scatter", //effectScatter,scatter
            z: 4,
            coordinateSystem: "geo",
            data: [[409.6, 80.1, "01121400000014"]],
            label: {
              normal: {
                show: true,
                formatter: function(params) {
                  // var name = params.name;
                  // var value = params.data.datas;
                  var text = "hahah";
                  return text;
                },
                color: "#fff",
                rich: {
                  fline: {
                    padding: [0, 25],
                    color: "#fff",
                    textShadowColor: "#030615",
                    textShadowBlur: "0",
                    textShadowOffsetX: 1,
                    textShadowOffsetY: 1,
                    fontSize: 14,
                    fontWeight: 400
                  },
                  tline: {
                    padding: [0, 27],
                    color: "#ABF8FF",
                    fontSize: 12
                  }
                }
              },
              emphasis: {}
            },
            itemStyle: {
              color: "#00FFF6"
            },
            symbol: "../../../../assets/errorImg/404_cloud.png",
            symbolSize: [100, 50],
            symbolOffset: [0, -60]
          }
        ]
      };
    }
  }
};
</script>
<style lang="scss" scoped></style>
